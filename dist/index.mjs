var h=Object.defineProperty;var g=Object.getOwnPropertySymbols;var v=Object.prototype.hasOwnProperty,x=Object.prototype.propertyIsEnumerable;var u=(e,o,r)=>o in e?h(e,o,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[o]=r,l=(e,o)=>{for(var r in o||(o={}))v.call(o,r)&&u(e,r,o[r]);if(g)for(var r of g(o))x.call(o,r)&&u(e,r,o[r]);return e};import*as t from"vite";import C from"javascript-obfuscator";var a=class{constructor(o){this.show=o;this._log=o?console.log.bind(console):this.noop}noop(o){}alwaysLog(...o){console.log(...o)}info(o){this._log(o)}};function p(e){let o=Math.floor(e/36e5),r=Math.floor(e%36e5/6e4),n=Math.floor(e%6e4/1e3);return[o?`${o}h `:"",r?`${r}m `:"",n||!o&&!r?`${n}s`:""].filter(Boolean).join("")}var d={excludes:[],enable:!0,log:!0,options:{compact:!0,controlFlowFlattening:!0,controlFlowFlatteningThreshold:1,deadCodeInjection:!1,debugProtection:!1,debugProtectionInterval:0,disableConsoleOutput:!1,identifierNamesGenerator:"hexadecimal",log:!1,numbersToExpressions:!1,renameGlobals:!1,selfDefending:!0,simplify:!0,splitStrings:!1,stringArray:!1,stringArrayCallsTransform:!1,stringArrayCallsTransformThreshold:.5,stringArrayEncoding:[],stringArrayIndexShift:!0,stringArrayRotate:!0,stringArrayShuffle:!0,stringArrayWrappersCount:1,stringArrayWrappersChainedCalls:!0,stringArrayWrappersParametersMaxCount:2,stringArrayWrappersType:"variable",stringArrayThreshold:.75,unicodeEscapeSequence:!1}};function A(){return t!=null&&t.version?Number(t.version.split(".")[0]):2}function T(e){let o=l(l({},d),e),r=new a(o.log),n=(f,{bundle:c})=>{if(!o.enable||!c)return f;let m=performance.now();r.alwaysLog("starting obfuscation process..."),Object.entries(c).forEach(([i,s])=>{"code"in s&&s.code&&o.excludes.every(b=>!i.includes(b))&&(r.info(`obfuscating ${i}...`),s.code=C.obfuscate(s.code,o.options).getObfuscatedCode(),r.info(`obfuscation complete for ${i}.`))});let y=p(performance.now()-m);return r.alwaysLog("\x1B[36m%s\x1B[0m %s","\u2713",`obfuscation process completed in ${y}.`),f};return{name:"vite-plugin-bundle-obfuscator",transformIndexHtml:A()>=5?{order:"post",handler:n}:{enforce:"post",transform:n}}}export{T as default};
