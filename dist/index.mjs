var b=Object.defineProperty;var g=Object.getOwnPropertySymbols;var v=Object.prototype.hasOwnProperty,C=Object.prototype.propertyIsEnumerable;var p=(e,o,r)=>o in e?b(e,o,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[o]=r,i=(e,o)=>{for(var r in o||(o={}))v.call(o,r)&&p(e,r,o[r]);if(g)for(var r of g(o))C.call(o,r)&&p(e,r,o[r]);return e};import*as n from"vite";import h from"javascript-obfuscator";var s=class{constructor(o){this.show=o;this._log=o?console.log.bind(console):this.noop}noop(o){}alwaysLog(o){console.log(o)}info(o){this._log(o)}},u={excludes:[],enable:!0,log:!0,options:{compact:!0,controlFlowFlattening:!0,controlFlowFlatteningThreshold:1,deadCodeInjection:!1,debugProtection:!1,debugProtectionInterval:0,disableConsoleOutput:!1,identifierNamesGenerator:"hexadecimal",log:!1,numbersToExpressions:!1,renameGlobals:!1,selfDefending:!0,simplify:!0,splitStrings:!1,stringArray:!1,stringArrayCallsTransform:!1,stringArrayCallsTransformThreshold:.5,stringArrayEncoding:[],stringArrayIndexShift:!0,stringArrayRotate:!0,stringArrayShuffle:!0,stringArrayWrappersCount:1,stringArrayWrappersChainedCalls:!0,stringArrayWrappersParametersMaxCount:2,stringArrayWrappersType:"variable",stringArrayThreshold:.75,unicodeEscapeSequence:!1}};function x(){return n!=null&&n.version?Number(n.version.split(".")[0]):2}function A(e){let o=i(i({},u),e),r=new s(o.log),l=(f,{bundle:c})=>{if(!o.enable||!c)return f;let d=performance.now();r.alwaysLog("starting obfuscation process..."),Object.entries(c).forEach(([a,t])=>{"code"in t&&t.code&&o.excludes.every(y=>!a.includes(y))&&(r.info(`obfuscating ${a}...`),t.code=h.obfuscate(t.code,o.options).getObfuscatedCode(),r.info(`obfuscation complete for ${a}.`))});let m=(performance.now()-d)/1e3;return r.alwaysLog("\u2713 obfuscation process completed in "+m.toFixed(1)+"s."),f};return{name:"vite-plugin-bundle-obfuscator",transformIndexHtml:x()>=5?{order:"post",handler:l}:{enforce:"post",transform:l}}}export{A as default};
