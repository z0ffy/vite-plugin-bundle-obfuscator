var m=Object.defineProperty;var f=Object.getOwnPropertySymbols;var y=Object.prototype.hasOwnProperty,b=Object.prototype.propertyIsEnumerable;var c=(o,r,e)=>r in o?m(o,r,{enumerable:!0,configurable:!0,writable:!0,value:e}):o[r]=e,a=(o,r)=>{for(var e in r||(r={}))y.call(r,e)&&c(o,e,r[e]);if(f)for(var e of f(r))b.call(r,e)&&c(o,e,r[e]);return o};import*as n from"vite";import C from"javascript-obfuscator";var u={excludes:[],enable:!0,log:!0,options:{compact:!0,controlFlowFlattening:!0,controlFlowFlatteningThreshold:1,deadCodeInjection:!1,debugProtection:!1,debugProtectionInterval:0,disableConsoleOutput:!1,identifierNamesGenerator:"hexadecimal",log:!1,numbersToExpressions:!1,renameGlobals:!1,selfDefending:!0,simplify:!0,splitStrings:!1,stringArray:!1,stringArrayCallsTransform:!1,stringArrayCallsTransformThreshold:.5,stringArrayEncoding:[],stringArrayIndexShift:!0,stringArrayRotate:!0,stringArrayShuffle:!0,stringArrayWrappersCount:1,stringArrayWrappersChainedCalls:!0,stringArrayWrappersParametersMaxCount:2,stringArrayWrappersType:"variable",stringArrayThreshold:.75,unicodeEscapeSequence:!1}};function x(){return n!=null&&n.version?Number(n.version.split(".")[0]):2}function A(o){let r=a(a({},u),o),e=(i,{bundle:l})=>{if(!r.enable||!l)return i;let g=performance.now();console.log("starting obfuscation process..."),Object.entries(l).forEach(([s,t])=>{"code"in t&&t.code&&r.excludes.every(d=>!s.includes(d))&&(r.log&&console.log(`Obfuscating ${s}...`),t.code=C.obfuscate(t.code,r.options).getObfuscatedCode(),r.log&&console.log(`Obfuscation complete for ${s}`))});let p=(performance.now()-g)/1e3;return console.log("obfuscation process completed in "+p.toFixed(1)+"s"),i};return{name:"vite-plugin-bundle-obfuscator",transformIndexHtml:x()>=5?{order:"post",handler:e}:{enforce:"post",transform:e}}}export{A as default};
